
###### 1) 책임 주도 설계

**데이터보다 행동을 먼저 결정**
+ 객체에게 중요한 것은 데이터가 아니라 외부에 제공하는 행동

**협력이라는 문맥 안에서 책임을 결정**
+ 책임은 객체의 입장이 아니라 객체가 참여하는 협력에 적합해야 한다.
+ 메시지를 결정한 후에 객체를 선택
 > 메시지 송신자는 메시지 수신자에 대한 어떠한 가정도 할 수 없다. 
 > 
 > 따라서, 전송자의 관점에서 메시지 수신자가 깔끔하게 캡슐화된다.

*ref.*
[[오브젝트04-08.pdf#page=39]]


###### 2) 책임 할당을 위한 GRASP 패턴

###### 2.1) 도메인 개념에서 출발
+ 도메인 모델을 통해 올바른 구현을 이끌어 낼 수 있으면 된다.

*ref.*
[[오브젝트04-08.pdf#page=41]]

###### 2.2) 정보 전문가에게 책임을 할당

1. 애플리케이션의 책임은?
	+ "예매하라"
	  → **메세지** :: 수신 객체가 아닌, 전송하는 객체의 의도를 반영해서 결정 
2. 어떤 객체가 좋을까?
	+ 상영 `Screening`
	  → 예매 관련된 정보를 가장 많이 알고 있다

*ref.*
[[오브젝트04-08.pdf#page=45]]

###### 2.3) 높은 응집도 & 낮은 결합도
여러 설계 방법 중, 더 나은 설계를 판단하는 기준

**낮은 결합도**
+ 도메인 모델 확인 → 결합 여부 확인
+ 이미 결합되어 있는 방향으로 협력

*ref.*
[[오브젝트04-08.pdf#page=46]]

**높은 응집도**
+ 책임을 판단
+ 또 다른 책임이 발생하지는 않는지 확인

*ref.*
[[오브젝트04-08.pdf#page=48]]


###### 2.4) 창조자에게 객체 생성 책임을 할당

```
# Reservation 생성 시 누가 Reservation을 가장 잘 알고 있는가?

# Screening 
- 따라서, Screening을 Reservation의 CREATOR로 선택
```

*ref.*
[[오브젝트04-08.pdf#page=49]]


###### 3) 구현을 통한 검증

###### 3.1) 역할과 구현
DiscountCondition은 여러가지가 존재함을 알 수 있다.
이를 하나의 Class에서 구현 하는 경우, 문제가 발생한다.

**문제**
다양한 변경 이유 → 낮은 응집도
+ 새로운 할인 조건 추가 
+ 순번 조건 판단 로직 변경 
+ 기간 조건 판단 로직 변경

**진단 & 해결**
+ 인스턴스 변수가 초기화되는 시점이 다르다.
  → ==함께 초기화 되는 속성을 기준으로 코드 분리==
+  메서드들이 인스턴스 변수를 사용하는 방식
  → ==모든 메서드가 객체의 모든 속성을 사용 하는가?== 

>역할이 존재하고, 역할의 구현을 하나의 클래스에 넣어 놓으니까, 문제 위와 같은 문제가 발생한다.
>
>즉, 여러 타입이 하나의 클래스 안에 공존하면서 발생하는 문제이다.
>
>다형성을 통해 타입을 분리 하자 


*ref.*
[[오브젝트04-08.pdf#page=57]]


###### 3.2) 상속 대신 합성

**도메인 모델을 통한 자연스러운 구현**
+ 할인 정책을 구현하기 위해 상속을 사용
+ 할인 정책을 추상 메서드로 놓는다.

**코드 구조**
+ 영화 (abstract)
	+ 금액 할인 정책 영화
	+ 비율 할인 정책 영화
	+ 할인 정책 없는 영화

>*# 내 생각*
>일반적으로 도메인 모델 고려 시, 상속처럼 생각하는 것 이 자연스러울 것 같다.

**문제**
상속 사용
→ 할인 정책 변경을 위해 새로운 인스턴스 생성 필요
→ 유연하지 못하다.

>*# TIP*
>1. 도메인 모델 고려 시, 상속으로 생각 하고
>2. 구현 시 **합성**으로 추출 하자.

*ref.*
[[오브젝트04-08.pdf#page=67]]


###### 4) 책임 주도 설계의 대안

+ 절차 지향으로 작성
+ 메서드로 추출
+ 책임 확인
+ 클래스 분리

*ref.*
[[오브젝트04-08.pdf#page=70]]